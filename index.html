<!DOCTYPE html>
<html lang="en">

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Telegram Web App</title>
        <style>
            .container {
                max-width: 100vh;
                /* Change width to max-width */
            }

            .flex {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }

            button {
                padding: clamp(0.7ex, 1.4ex + 2vmin, 2.5ex);
                font-size: clamp(2.7vmin, 300%, 6vmin);
                font-family: monospace;
                border-radius: 12%;
                margin: clamp(5px, 1vmin, 20px);
                background-color: rgb(196, 184, 171);
            }

            .color {
                color: rgb(17, 222, 188);
                justify-content: center;
                font-size: clamp(4vmin, 175%, 8vmin);
            }

            body {
                font-family: monospace;
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 0;
            }

            .ws3 {
                height: 45px;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1 class="color">Введите 2 цифры: <span id="view"></span></h1>

            <div class="flex">
                <button onclick="recordButtonClick(7)">7</button>
                <button onclick="recordButtonClick(8)">8</button>
                <button onclick="recordButtonClick(9)">9</button>
            </div>
            <div class="flex">
                <button onclick="recordButtonClick(4)">4</button>
                <button onclick="recordButtonClick(5)">5</button>
                <button onclick="recordButtonClick(6)">6</button>
            </div>
            <div class="flex">
                <button onclick="recordButtonClick(1)">1</button>
                <button onclick="recordButtonClick(2)">2</button>
                <button onclick="recordButtonClick(3)">3</button>
            </div>
            <div class="flex">
                <button onclick="recordButtonClick(0)">0</button>
                <button onclick="deleteButtonClick()">C</button>
                <button onclick="helpButtonClick()">?</button>
            </div>

            <p>
                <a href="https://validator.w3.org/nu/?doc=https://i5anin.github.io/telegram-web-app"
                    style="text-decoration:none">
                    <img src="https://bot.pf-forum.ru/assets/wsc5.png" alt="Valid HTML 5" class="ws3">
                </a>
                <a href="https://jigsaw.w3.org/css-validator/validator?uri=https://i5anin.github.io/telegram-web-app"
                    style="text-decoration:none">
                    <img class="ws3" src="https://jigsaw.w3.org/css-validator/images/vcss" alt="Правильный CSS!">
                </a>
            </p>
        </div>
        <script>
            let buttonClicks = [];
            let i = 0;

            function updateView() {
                document.getElementById("view").textContent = buttonClicks.join("");
            }

            function helpButtonClick() {
                window.location.href = `https://github.com/i5anin/telegram-web-app`;
            }

            function search() {
                const queryParam = buttonClicks.join("");
                updateView();
                window.location.href = `https://t.me/geopricebot?start=${queryParam}`;
            }

            function deleteButtonClick() {
                i--;
                console.log(buttonClicks);
                buttonClicks.pop();
                updateView();
            }

            function recordButtonClick(buttonNumber) {
                i++;
                console.log(buttonClicks);
                buttonClicks.push(buttonNumber);
                updateView();
                if (i == 6) {
                    search();
                    i = 0;
                    buttonClicks = [];
                }
            }
        </script>
    </body>

</html>